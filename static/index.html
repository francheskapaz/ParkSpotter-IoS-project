<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Leaflet CSS -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
        <!-- Leaflet JS -->
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script src="/script.js"></script>

        <title>Parkspotter</title>

        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <h1>Parkspotter</h1>
        <nav>
            <div class="checkbox-container">
                <label><input type="checkbox" id="car"> Automobili</label>
                <label><input type="checkbox" id="bike"> Biciclette</label>
                <label><input type="checkbox" id="motorbike"> Moto</label>
            </div>
            <div class="links">
                <div id="auth" style="display:none">
                    <a href="/user.html">Profile</a>
                    <a href="javascript:window.localStorage.removeItem('token');location.reload();">Log-out</a>
                </div>
                <div id="notauth">
                    <a href="/signup.html">Sign-up</a>
                    <a href="/login.html">Log-in</a>
                </div>
            </div>
        </nav>

        <div id="map-container">
            <div id="map"></div>
        </div>
        <script>
        // Show links
        getUserType()
        .then((userType) => {
            if (userType !== 'Unauthenticated') {
                document.getElementById('auth').style.display = 'block';
                document.getElementById('notauth').style.display = 'none';
            }
        })
        </script>
        <script>
            $(document).ready(function() {
                showCars();
            })
            $('#car').prop('checked', true);
            $('#bike').prop('checked', false);
            $('#motorbike').prop('checked', false);
            $('#car').change(function() {
                if ($(this).is(':checked')) {
                    showCars();
                } else {
                    hideCars();
                }
            });
            $('#bike').change(function() {
                if ($(this).is(':checked')) {
                    showBikes();
                } else {
                    hideBikes();
                }
            });
            $('#motorbike').change(function() {
                if ($(this).is(':checked')) {
                    showMotorbikes();
                } else {
                    hideMotorbikes();
                }
            });
        </script>
        <script src="/map.js"></script>
    </body>
</html>
